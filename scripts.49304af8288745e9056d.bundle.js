!function(){var e={},t=function(t){for(var o=e[t],r=o.deps,i=o.defn,a=r.length,l=new Array(a),s=0;s<a;++s)l[s]=n(r[s]);var c=i.apply(null,l);if(void 0===c)throw"module ["+t+"] returned undefined";o.instance=c},n=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},o=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},r=function(e,t){o(e,[],function(){return t})};r("1",tinymce.Env),r("2",tinymce.EditorManager),r("3",tinymce.ThemeManager),r("8",tinymce.util.Tools),r("9",tinymce.ui.Factory),r("a",tinymce.DOM),o("b",["8","9"],function(e,t){var n=function(n,o,r){var i,a=[];if(o)return e.each(o.split(/[ ,]/),function(e){var o=function(){var t=n.selection;e.settings.stateSelector&&t.selectorChanged(e.settings.stateSelector,function(t){e.active(t)},!0),e.settings.disabledStateSelector&&t.selectorChanged(e.settings.disabledStateSelector,function(t){e.disabled(t)})};"|"==e?i=null:t.has(e)?(a.push(e={type:e,size:r}),i=null):(i||a.push(i={type:"buttongroup",items:[]}),n.buttons[e]&&("function"==typeof(e=n.buttons[e])&&(e=e()),e.type=e.type||"button",e.size=r,e=t.create(e),i.items.push(e),n.initialized?o():n.on("init",o)))}),{type:"toolbar",layout:"flow",items:a}};return{createToolbar:n,createToolbars:function(t,o){var r=[],i=t.settings,a=function(e){if(e)return r.push(n(t,e,o)),!0};if(e.isArray(i.toolbar)){if(0===i.toolbar.length)return;e.each(i.toolbar,function(e,t){i["toolbar"+(t+1)]=e}),delete i.toolbar}for(var l=1;l<10&&a(i["toolbar"+l]);l++);if(r.length||!1===i.toolbar||a(i.toolbar||"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"),r.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:r}}}}),o("c",["8"],function(e){var t={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},n=function(e,t){return"|"==t?{text:"|"}:e[t]},o=function(o,r,i){var a,l,s,c,u;if(u=e.makeMap((r.removed_menuitems||"").split(/[ ,]/)),r.menu?(l=r.menu[i],c=!0):l=t[i],l){a={text:l.title},s=[],e.each((l.items||"").split(/[ ,]/),function(e){n(o,e)&&!u[e]&&s.push(n(o,e))}),c||e.each(o,function(e){e.context==i&&("before"==e.separator&&s.push({text:"|"}),e.prependToContext?s.unshift(e):s.push(e),"after"==e.separator&&s.push({text:"|"}))});for(var d=0;d<s.length;d++)"|"==s[d].text&&(0!==d&&d!=s.length-1||s.splice(d,1));if(a.menu=s,!a.menu.length)return null}return a};return{createMenuButtons:function(e){var n,r=[],i=e.settings,a=[];if(i.menu)for(n in i.menu)a.push(n);else for(n in t)a.push(n);for(var l="string"==typeof i.menubar?i.menubar.split(/[ ,]/):a,s=0;s<l.length;s++){var c=l[s];(c=o(e.menuItems,e.settings,c))&&r.push(c)}return r}}}),r("j",tinymce.util.Delay),r("k",tinymce.geom.Rect),o("d",["a","8","j","b","9","k"],function(e,t,n,o,r,i){var a=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},l=function(e){t.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})},s=function(e,t){e.moveTo(t.left,t.top)},c=function(e,n,o){n=n?n.substr(0,2):"",t.each({t:"down",b:"up"},function(t,r){e.classes.toggle("arrow-"+t,o(r,n.substr(0,1)))}),t.each({l:"left",r:"right"},function(t,r){e.classes.toggle("arrow-"+t,o(r,n.substr(1,1)))})},u=function(e,t,n,o,r,i){return i=a({x:t,y:n,w:i.w,h:i.h}),e&&(i=e({elementRect:a(o),contentAreaRect:a(r),panelRect:i})),i};return{addContextualToolbars:function(a){var d,f=a.settings,m=function(){return a.contextToolbars||[]},p=function(t,n){var o,r,d,m,p,g,h,b,v=f.inline_toolbar_position_handler;if(!a.removed){if(!t||!t.toolbar.panel)return void l(a);h=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],p=t.toolbar.panel,n&&p.show(),d=function(t){var n,o,r;return n=e.getPos(a.getContentAreaContainer()),o=a.dom.getRect(t),"BODY"===(r=a.dom.getRoot()).nodeName&&(o.x-=r.ownerDocument.documentElement.scrollLeft||r.scrollLeft,o.y-=r.ownerDocument.documentElement.scrollTop||r.scrollTop),o.x+=n.x,o.y+=n.y,o}(t.element),r=e.getRect(p.getEl()),m=e.getRect(a.getContentAreaContainer()||a.getBody()),b=25,"inline"!==e.getStyle(t.element,"display",!0)&&(d.w=t.element.clientWidth,d.h=t.element.clientHeight),a.inline||(m.w=a.getDoc().documentElement.offsetWidth),a.selection.controlSelection.isResizable(t.element)&&d.w<b&&(d=i.inflate(d,0,8)),o=i.findBestRelativePosition(r,d,m,h),d=i.clamp(d,m),o?(g=i.relativePosition(r,d,o),s(p,u(v,g.x,g.y,d,m,r))):(m.h+=r.h,(d=i.intersect(m,d))?(o=i.findBestRelativePosition(r,d,m,["bc-tc","bl-tl","br-tr"]))?(g=i.relativePosition(r,d,o),s(p,u(v,g.x,g.y,d,m,r))):s(p,u(v,d.x,d.y,d,m,r)):p.hide()),c(p,o,function(e,t){return e===t})}},g=function(e){return function(){n.requestAnimationFrame(function(){a.selection&&p(v(a.selection.getNode()),e)})}},h=function(){d||(d=a.selection.getScrollContainer()||a.getWin(),e.bind(d,"scroll",g(!0)),a.on("remove",function(){e.unbind(d,"scroll")}))},b=function(){t.each(m(),function(e){e.panel&&e.panel.hide()})},v=function(e){var t,n,o,r=m();for(t=(o=a.$(e).parents().add(e)).length-1;t>=0;t--)for(n=r.length-1;n>=0;n--)if(r[n].predicate(o[t]))return{toolbar:r[n],element:o[t]};return null};a.on("click keyup setContent ObjectResized",function(e){("setcontent"!==e.type||e.selection)&&n.setEditorTimeout(a,function(){var e;(e=v(a.selection.getNode()))?(b(),function(e){var t;e.toolbar.panel?(e.toolbar.panel.show(),p(e)):(h(),t=r.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:o.createToolbar(a,e.toolbar.items),oncancel:function(){a.focus()}}),e.toolbar.panel=t,t.renderTo(document.body).reflow(),p(e))}(e)):b()})}),a.on("blur hide contextmenu",b),a.on("ObjectResizeStart",function(){var e=v(a.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),a.on("ResizeEditor ResizeWindow",g(!0)),a.on("nodeChange",g(!1)),a.on("remove",function(){t.each(m(),function(e){e.panel&&e.panel.remove()}),a.contextToolbars={}}),a.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var e=v(a.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()})}}}),o("e",[],function(){var e=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}};return{addKeys:function(t,n){t.shortcuts.add("Alt+F9","",e(n,"menubar")),t.shortcuts.add("Alt+F10,F10","",e(n,"toolbar")),t.shortcuts.add("Alt+F11","",e(n,"elementpath")),n.on("cancel",function(){t.focus()})}}}),o("f",["8","9","1"],function(e,t,n){var o=function(e,t,n){var o=e.settings[n];o&&o(function(e){return{element:function(){return e}}}(t.getEl("body")))},r=function(t,n,r){e.each(r,function(e){var r=n.items().filter("#"+e.name)[0];r&&r.visible()&&e.name!==t&&(o(e,r,"onhide"),r.visible(!1))})},i=function(t,n){return e.grep(t,function(e){return e.name===n})[0]},a=function(e,n,a){return function(l){var s=l.control,c=s.parents().filter("panel")[0],u=c.find("#"+n)[0],d=i(a,n);r(n,c,a),s.parent().items().each(function(e){e.active(!1)}),u&&u.visible()?(o(d,u,"onhide"),u.hide(),s.active(!1)):(u?(u.show(),o(d,u,"onshow")):(u=t.create({type:"container",name:n,layout:"stack",classes:"sidebar-panel",html:""}),c.prepend(u),o(d,u,"onrender"),o(d,u,"onshow")),s.active(!0)),e.fire("ResizeEditor")}};return{hasSidebar:function(e){return!(n.ie&&!(n.ie>=11)||!e.sidebars)&&e.sidebars.length>0},createSidebar:function(t){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:e.map(t.sidebars,function(e){var n=e.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:a(t,e.name,t.sidebars)}})}]}}}}),o("g",[],function(){return{fireSkinLoaded:function(e){var t=function(){e._skinLoaded=!0,e.fire("SkinLoaded")};return function(){e.initialized?t():e.on("init",t)}}}}),o("6",["a"],function(e){var t=function(e){return{width:e.clientWidth,height:e.clientHeight}},n=function(n,o,r){var i,a,l,s,c=n.settings;i=n.getContainer(),a=n.getContentAreaContainer().firstChild,l=t(i),s=t(a),null!==o&&(o=Math.max(c.min_width||100,o),o=Math.min(c.max_width||65535,o),e.setStyle(i,"width",o+(l.width-s.width)),e.setStyle(a,"width",o)),r=Math.max(c.min_height||100,r),r=Math.min(c.max_height||65535,r),e.setStyle(a,"height",r),n.fire("ResizeEditor")};return{resizeTo:n,resizeBy:function(e,t,o){var r=e.getContentAreaContainer();n(e,r.clientWidth+t,r.clientHeight+o)}}}),o("4",["8","9","a","b","c","d","e","f","g","6"],function(e,t,n,o,r,i,a,l,s,c){var u=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}};return{render:function(e,d,f){var m,p,g,h=e.settings;return f.skinUiCss&&n.styleSheetLoader.load(f.skinUiCss,s.fireSkinLoaded(e)),m=d.panel=t.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===h.menubar?null:{type:"menubar",border:"0 0 1 0",items:r.createMenuButtons(e)},o.createToolbars(e,h.toolbar_items_size),l.hasSidebar(e)?function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[u("0"),l.createSidebar(e)]}}(e):u("1 0 0 0")]}),!1!==h.resize&&(p={type:"resizehandle",direction:h.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;g={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){c.resizeTo(e,"both"===h.resize?g.width+t.deltaX:null,g.height+t.deltaY)}}),!1!==h.statusbar&&m.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},p]}),e.fire("BeforeRenderUI"),e.on("SwitchMode",function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}}(m)),m.renderBefore(f.targetNode).reflow(),h.readonly&&e.setMode("readonly"),h.width&&n.setStyle(m.getEl(),"width",h.width),e.on("remove",function(){m.remove(),m=null}),a.addKeys(e,m),i.addContextualToolbars(e),{iframeContainer:m.find("#iframe")[0].getEl(),editorContainer:m.getEl()}}}}),r("h",tinymce.ui.FloatPanel),o("5",["8","9","a","h","b","c","d","e","g"],function(e,t,n,o,r,i,a,l,s){return{render:function(e,c,u){var d,f,m=e.settings;m.fixed_toolbar_container&&(f=n.select(m.fixed_toolbar_container)[0]);var p=function(){if(d&&d.moveRel&&d.visible()&&!d._fixed){var t=e.selection.getScrollContainer(),o=e.getBody(),r=0,i=0;if(t){var a=n.getPos(o),l=n.getPos(t);r=Math.max(0,l.x-a.x),i=Math.max(0,l.y-a.y)}d.fixed(!1).moveRel(o,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(r,i)}},g=function(){d&&(d.show(),p(),n.addClass(e.getBody(),"mce-edit-focus"))},h=function(){d&&(d.hide(),o.hideAll(),n.removeClass(e.getBody(),"mce-edit-focus"))},b=function(){return d?void(d.visible()||g()):(d=c.panel=t.create({type:f?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!f,border:1,items:[!1===m.menubar?null:{type:"menubar",border:"0 0 1 0",items:i.createMenuButtons(e)},r.createToolbars(e,m.toolbar_items_size)]}),e.fire("BeforeRenderUI"),d.renderTo(f||document.body).reflow(),l.addKeys(e,d),g(),a.addContextualToolbars(e),e.on("nodeChange",p),e.on("activate",g),e.on("deactivate",h),void e.nodeChanged())};return m.content_editable=!0,e.on("focus",function(){u.skinUiCss?n.styleSheetLoader.load(u.skinUiCss,b,b):b()}),e.on("blur hide",h),e.on("remove",function(){d&&(d.remove(),d=null)}),u.skinUiCss&&n.styleSheetLoader.load(u.skinUiCss,s.fireSkinLoaded(e)),{}}}}),r("i",tinymce.ui.Throbber),o("7",["i"],function(e){return{setup:function(t,n){var o;t.on("ProgressState",function(t){o=o||new e(n.panel.getEl("body")),t.state?o.show(t.time):o.hide()})}}}),o("0",["1","2","3","4","5","6","7"],function(e,t,n,o,r,i,a){var l=function(n,i,l){var s=n.settings,c=!1!==s.skin&&(s.skin||"lightgray");if(c){var u=s.skin_url;u=u?n.documentBaseURI.toAbsolute(u):t.baseURL+"/skins/"+c,l.skinUiCss=e.documentMode<=7?u+"/skin.ie7.min.css":u+"/skin.min.css",n.contentCSS.push(u+"/content"+(n.inline?".inline":"")+".min.css")}return a.setup(n,i),s.inline?r.render(n,i,l):o.render(n,i,l)};return n.add("modern",function(e){return{renderUI:function(t){return l(e,this,t)},resizeTo:function(t,n){return i.resizeTo(e,t,n)},resizeBy:function(t,n){return i.resizeBy(e,t,n)}}}),function(){}}),n("0")()}(),tinymce.PluginManager.add("link",function(e){function t(e){return e&&"A"===e.nodeName&&e.href}function n(e){return tinymce.util.Tools.grep(e,t).length>0}function o(t){return e.dom.getParent(t,"a[href]")}function r(){return o(e.selection.getStart())}function i(t){if(t){var n=function(e){return e.getAttribute("data-mce-href")||e.getAttribute("href")}(t);if(/^#/.test(n)){var o=e.$(n);o.length&&e.selection.scrollIntoView(o[0],!0)}else!function(e){if(!tinymce.Env.ie||tinymce.Env.ie>10){var t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(e,t){document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)}(t,n)}else{var o=window.open("","_blank");if(o){o.opener=null;var r=o.document;r.open(),r.write('<meta http-equiv="refresh" content="0; url='+tinymce.DOM.encode(e)+'">'),r.close()}}}(t.href)}}function a(){i(r())}function l(t){return function(){var n=e.settings.link_list;"string"==typeof n?tinymce.util.XHR.send({url:n,success:function(e){t(tinymce.util.JSON.parse(e))}}):"function"==typeof n?n(t):t(n)}}function s(e,t,n){return function e(n,o){return o=o||[],tinymce.each(n,function(n){var r={text:n.text||n.title};n.menu?r.menu=e(n.menu):(r.value=n.value,t&&t(r)),o.push(r)}),o}(e,n||[])}function c(t){function n(e){var t=l.find("#text");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),l.find("#href").value(e.control.value())}function o(){!a&&0===v.text.length&&c&&this.parent().parent().find("#text")[0].value(this.value())}var r,i,a,l,c,d,f,m,p,g,h,b,v={},y=e.selection,w=e.dom;r=y.getNode(),i=w.getParent(r,"a[href]"),c=function(e){var t=y.getContent();return!(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1==t.indexOf("href=")))}(),v.text=a=i?i.innerText||i.textContent:y.getContent({format:"text"}),v.href=i?w.getAttrib(i,"href"):"",i?v.target=w.getAttrib(i,"target"):e.settings.default_link_target&&(v.target=e.settings.default_link_target),(b=w.getAttrib(i,"rel"))&&(v.rel=b),(b=w.getAttrib(i,"class"))&&(v.class=b),(b=w.getAttrib(i,"title"))&&(v.title=b),c&&(d={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){v.text=this.value()}}),t&&(f={type:"listbox",label:"Link list",values:s(t,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:n,value:e.convertURL(v.href,"href"),onPostRender:function(){f=this}}),!1!==e.settings.target_list&&(e.settings.target_list||(e.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]),p={name:"target",type:"listbox",label:"Target",values:s(e.settings.target_list)}),e.settings.rel_list&&(m={name:"rel",type:"listbox",label:"Rel",values:s(e.settings.rel_list)}),e.settings.link_class_list&&(g={name:"class",type:"listbox",label:"Class",values:s(e.settings.link_class_list,function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),!1!==e.settings.link_title&&(h={name:"title",type:"textbox",label:"Title",value:v.title}),l=e.windowManager.open({title:"Insert link",data:v,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(t){var n=t.meta||{};f&&f.value(e.convertURL(this.value(),"href")),tinymce.each(t.meta,function(e,t){var n=l.find("#"+t);"text"===t?0===a.length&&(n.value(e),v.text=e):n.value(e)}),n.attach&&(u={href:this.value(),attach:n.attach}),n.text||o.call(this)},onkeyup:o,onbeforecall:function(e){e.meta=l.toJSON()}},d,h,function(t){var o=[];if(tinymce.each(e.dom.select("a:not([href])"),function(e){var n=e.name||e.id;n&&o.push({text:n,value:"#"+n,selected:-1!=t.indexOf("#"+n)})}),o.length)return o.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:o,onselect:n}}(v.href),f,m,p,g],onSubmit:function(t){function n(t,n){var o=e.selection.getRng();tinymce.util.Delay.setEditorTimeout(e,function(){e.windowManager.confirm(t,function(t){e.selection.setRng(o),n(t)})})}function o(){var t={href:l,target:v.target?v.target:null,rel:v.rel?v.rel:null,class:v.class?v.class:null,title:v.title?v.title:null};e.settings.allow_unsafe_link_target||(t.rel=function(e,t){function n(e){var t=new RegExp("("+o.replace(" ","|")+")","g");return e&&(e=tinymce.trim(e.replace(t,""))),e||null}var o="noopener noreferrer";return t?function(e){return(e=n(e))?[e,o].join(" "):o}(e):n(e)}(t.rel,"_blank"==t.target)),l===u.href&&(u.attach(),u={}),i?(e.focus(),c&&v.text!=a&&("innerText"in i?i.innerText=v.text:i.textContent=v.text),w.setAttribs(i,t),y.select(i),e.undoManager.add()):c?e.insertContent(w.createHTML("a",t,w.encode(v.text))):e.execCommand("mceInsertLink",!1,t)}function r(){e.undoManager.transact(o)}var l;return v=tinymce.extend(v,t.data),(l=v.href)?l.indexOf("@")>0&&-1==l.indexOf("//")&&-1==l.indexOf("mailto:")?void n("The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(l="mailto:"+l),r()}):e.settings.link_assume_external_targets&&!/^\w+:/i.test(l)||!e.settings.link_assume_external_targets&&/^\s*www[\.|\d\.]/i.test(l)?void n("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(l="http://"+l),r()}):void r():void e.execCommand("unlink")}})}var u={};e.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:l(c),stateSelector:"a[href]"}),e.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"}),e.addContextToolbar&&(e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:a}),e.addContextToolbar(function(n){var o,r,i;return!!(e.settings.link_context_toolbar&&!function(){var t=e.plugins.contextmenu;return!!t&&t.isContextMenuVisible()}()&&t(n)&&(o=e.selection,r=o.getRng(),i=r.startContainer,3==i.nodeType&&o.isCollapsed()&&r.startOffset>0&&r.startOffset<i.data.length))},"openlink | link unlink")),e.addShortcut("Meta+K","",l(c)),e.addCommand("mceLink",l(c)),e.on("click",function(e){var t=o(e.target);t&&tinymce.util.VK.metaKeyPressed(e)&&(e.preventDefault(),i(t))}),e.on("keydown",function(e){var t=r();t&&13===e.keyCode&&function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey}(e)&&(e.preventDefault(),i(t))}),this.showDialog=c,e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:a,onPostRender:function(){var t=this,o=function(e){n(e.parents)?t.show():t.hide()};n(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",o),t.on("remove",function(){e.off("nodechange",o)})},prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:l(c),stateSelector:"a[href]",context:"insert",prependToContext:!0})}),function(e,t){"use strict";function n(e,t){for(var n,o=[],a=0;a<e.length;++a){if(!(n=i[e[a]]||r(e[a])))throw"module definition dependecy not found: "+e[a];o.push(n)}t.apply(null,o)}function o(e,o,r){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(o===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";n(o,function(){i[e]=r.apply(null,arguments)})}function r(t){for(var n=e,o=t.split(/[.\/]/),r=0;r<o.length;++r){if(!n[o[r]])return;n=n[o[r]]}return n}var i={};o("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(e,t,n){function o(t,n){return e.each(n,function(e){t=e.constructor==RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}return{filter:o,innerText:function(r){var i=new n,a=new t({},i),l="",s=i.getShortEndedElements(),c=e.makeMap("script noscript style textarea video audio iframe object"," "),u=i.getBlockElements();return r=o(r,[/<!\[[^\]]+\]>/g]),function e(t){var n=t.name,o=t;if("br"!==n)if(s[n]&&(l+=" "),c[n])l+=" ";else{if(3==t.type&&(l+=t.value),!t.shortEnded&&(t=t.firstChild))do{e(t)}while(t=t.next);u[n]&&o.next&&(l+="\n","p"==n&&(l+="\n"))}else l+="\n"}(a.parse(r)),l},trimHtml:function(e){return o(function(e){var t="\x3c!--StartFragment--\x3e",n="\x3c!--EndFragment--\x3e",o=e.indexOf(t);if(-1!==o){var r=e.substr(o+t.length),i=r.indexOf(n);if(-1!==i&&/^<\/(p|h[1-6]|li)>/i.test(r.substr(i+n.length,5)))return r.substr(0,i)}return e}(e),[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?"\xa0":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(e){var t=0;return function(){return e+t++}}}}),o("tinymce/pasteplugin/SmartPaste",["tinymce/util/Tools"],function(e){var t=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},n=function(e){return t(e)&&/.(gif|jpe?g|png)$/.test(e)},o=function(e,n,o){return!(!1!==e.selection.isCollapsed()||!t(n))&&function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0}(e,n,o)},r=function(e,t,o){return!!n(t)&&function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0}(e,t,o)},i=function(e,t){return e.insertContent(t,{merge:!1!==e.settings.paste_merge_formats,paste:!0}),!0},a=function(t,n){e.each([o,r,i],function(e){return!0!==e(t,n,i)})};return{isImageUrl:n,isAbsoluteUrl:t,insertContent:function(e,t){!1===e.settings.smart_paste?i(e,t):a(e,t)}}}),o("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils","tinymce/pasteplugin/SmartPaste","tinymce/util/Delay"],function(e,t,n,o,r,i){return function(a){function l(e){var t,n=a.dom;if(t=a.fire("BeforePastePreProcess",{content:e}),e=(t=a.fire("PastePreProcess",t)).content,!t.isDefaultPrevented()){if(a.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()){var o=n.add(a.getBody(),"div",{style:"display:none"},e);t=a.fire("PastePostProcess",{node:o}),n.remove(o),e=t.node.innerHTML}t.isDefaultPrevented()||r.insertContent(a,e)}}function s(e){e=a.dom.encode(e).replace(/\r\n/g,"\n");var t,n=a.dom.getParent(a.selection.getStart(),a.dom.isBlock),r=a.settings.forced_root_block;r&&(t=(t=a.dom.createHTML(r,a.settings.forced_root_block_attrs)).substr(0,t.length-3)+">"),n&&/^(PRE|DIV)$/.test(n.nodeName)||!r?e=o.filter(e,[[/\n/g,"<br>"]]):-1!=(e=o.filter(e,[[/\n\n/g,"</p>"+t],[/^(.*<\/p>)(<p>)$/,t+"$1"],[/\n/g,"<br />"]])).indexOf("<p>")&&(e=t+e),l(e)}function c(){var t,n=a.dom,o=a.getBody(),r=a.dom.getViewPort(a.getWin()).y,i=20;if(x=a.selection.getRng(),a.inline&&(t=a.selection.getScrollContainer())&&t.scrollTop>0&&(r=t.scrollTop),x.getClientRects){var l=function(e){var t,o,r,i=e.startContainer;if((t=e.getClientRects()).length)return t[0];if(e.collapsed&&1==i.nodeType){for(r=i.childNodes[x.startOffset];r&&3==r.nodeType&&!r.data.length;)r=r.nextSibling;if(r)return"BR"==r.tagName&&(o=n.doc.createTextNode("\ufeff"),r.parentNode.insertBefore(o,r),(e=n.createRng()).setStartBefore(o),e.setEndAfter(o),t=e.getClientRects(),n.remove(o)),t.length?t[0]:void 0}}(x);if(l)i=r+(l.top-n.getPos(o).y);else{i=r;var s=x.startContainer;s&&(3==s.nodeType&&s.parentNode!=o&&(s=s.parentNode),1==s.nodeType&&(i=n.getPos(s,t||o).y))}}w=n.add(a.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+i+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},P),(e.ie||e.gecko)&&n.setStyle(w,"left","rtl"==n.getStyle(o,"direction",!0)?65535:-65535),n.bind(w,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),w.focus(),a.selection.select(w,!0)}function u(){if(w){for(var e;e=a.dom.get("mcepastebin");)a.dom.remove(e),a.dom.unbind(e);x&&a.selection.setRng(x)}w=x=null}function d(){var e,t,n,o="";for(e=a.dom.select("div[id=mcepastebin]"),t=0;t<e.length;t++)(n=e[t]).firstChild&&"mcepastebin"==n.firstChild.id&&(n=n.firstChild),o!=P&&(o+=n.innerHTML);return o}function f(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1==n.indexOf(R)&&(t["text/plain"]=n)}if(e.types)for(var o=0;o<e.types.length;o++){var r=e.types[o];t[r]=e.getData(r)}}return t}function m(e){return f(e.clipboardData||a.getDoc().dataTransfer)}function p(e){return v(e,"text/html")||v(e,"text/plain")}function g(e,t,n){e&&(a.selection.setRng(e),e=null);var o=t.result,r=function(e){var t;return-1!==(t=e.indexOf(","))?e.substr(t+1):null}(o),i=new Image;if(i.src=o,function(e,t){return!e.images_dataimg_filter||e.images_dataimg_filter(i)}(a.settings)){var s,c,u=a.editorUpload.blobCache;(c=u.findFirst(function(e){return e.base64()===r}))?s=c:(s=u.create(_(),n,r),u.add(s)),l('<img src="'+s.blobUri()+'">')}else l('<img src="'+o+'">')}function h(e,t){function n(n){var o,r,i,a=!1;if(n)for(o=0;o<n.length;o++)if(/^image\/(jpeg|png|gif|bmp)$/.test((r=n[o]).type)){var l=r.getAsFile?r.getAsFile():r;(i=new FileReader).onload=g.bind(null,t,i,l),i.readAsDataURL(l),e.preventDefault(),a=!0}return a}var o=e.clipboardData||e.dataTransfer;if(a.settings.paste_data_images&&o)return n(o.items)||n(o.files)}function b(e){return t.getCaretRangeFromPoint(e.clientX,e.clientY,a.getDoc())}function v(e,t){return t in e&&e[t].length>0}function y(e){return n.metaKeyPressed(e)&&86==e.keyCode||e.shiftKey&&45==e.keyCode}var w,x,C,S=this,T=0,k=!1,P="%MCEPASTEBIN%",R="data:text/mce-internal,",_=o.createIdGenerator("mceclip");S.pasteHtml=l,S.pasteText=s,S.pasteImageData=h,a.on("preInit",function(){(function(){function t(e,t,n){var r;return v(e,"text/html")?r=e["text/html"]:(r=d())==P&&(n=!0),r=o.trimHtml(r),w&&w.firstChild&&"mcepastebin"===w.firstChild.id&&(n=!0),u(),r.length||(n=!0),n&&(r=v(e,"text/plain")&&-1==r.indexOf("</p>")?e["text/plain"]:o.innerText(r)),r==P?void(t||a.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(n?s(r):l(r))}a.on("keydown",function(t){function n(e){y(e)&&!e.isDefaultPrevented()&&u()}if(y(t)&&!t.isDefaultPrevented()){if((C=t.shiftKey&&86==t.keyCode)&&e.webkit&&-1!=navigator.userAgent.indexOf("Version/"))return;if(t.stopImmediatePropagation(),T=(new Date).getTime(),e.ie&&C)return t.preventDefault(),void a.fire("paste",{ieFake:!0});u(),c(),a.once("keyup",n),a.once("paste",function(){a.off("keyup",n)})}}),a.on("paste",function(n){var o=(new Date).getTime(),r=m(n),l=(new Date).getTime()-o,s=(new Date).getTime()-T-l<1e3,f="text"==S.pasteFormat||C;return C=!1,n.isDefaultPrevented()||function(e){var t=n.clipboardData;return-1!=navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length}()?void u():!p(r)&&h(n,x||a.selection.getRng())?void u():(s||n.preventDefault(),!e.ie||s&&!n.ieFake||(c(),a.dom.bind(w,"paste",function(e){e.stopPropagation()}),a.getDoc().execCommand("Paste",!1,null),r["text/html"]=d()),void(v(r,"text/html")?(n.preventDefault(),t(r,s,f)):i.setEditorTimeout(a,function(){t(r,s,f)},0)))}),a.on("dragstart dragend",function(e){k="dragstart"==e.type}),a.on("drop",function(e){var t,n;if(n=b(e),!e.isDefaultPrevented()&&!k&&(p(t=f(e.dataTransfer))&&!function(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")}(t)||!h(e,n))&&n&&!1!==a.settings.paste_filter_drop){var r=t["mce-internal"]||t["text/html"]||t["text/plain"];r&&(e.preventDefault(),i.setEditorTimeout(a,function(){a.undoManager.transact(function(){t["mce-internal"]&&a.execCommand("Delete"),a.selection.setRng(n),r=o.trimHtml(r),t["text/html"]?l(r):s(r)})}))}}),a.on("dragover dragend",function(e){a.settings.paste_data_images&&e.preventDefault()})})(),a.parser.addNodeFilter("img",function(t,n,o){function r(t){t.attr("data-mce-object")||c===e.transparentSrc||t.remove()}function i(e){return 0===e.indexOf("webkit-fake-url")}function l(e){return 0===e.indexOf("data:")}if(!a.settings.paste_data_images&&o.data&&!0===o.data.paste)for(var s=t.length;s--;){var c=t[s].attributes.map.src;c&&(i(c)?r(t[s]):!a.settings.allow_html_data_urls&&l(c)&&r(t[s]))}})})}}),o("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(e,t,n,o,r,i){function a(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function l(t){var n,o;return o=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),e.each(o,function(e){if(e.test(t))return n=!0,!1}),n}function s(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function c(c){var u=c.settings;c.on("BeforePastePreProcess",function(d){function f(t,n){var o,i={},a=c.dom.parseStyle(n);return e.each(a,function(e,r){switch(r){case"mso-list":(o=/\w+ \w+([0-9]+)/i.exec(n))&&(t._listLevel=parseInt(o[1],10)),/Ignore/i.test(e)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":r="text-align";break;case"vert-align":r="vertical-align";break;case"font-color":case"mso-foreground":r="color";break;case"mso-background":case"mso-highlight":r="background";break;case"font-weight":case"font-style":return void("normal"!=e&&(i[r]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void t.remove()}return 0===r.indexOf("mso-comment")?void t.remove():void(0!==r.indexOf("mso-")&&("all"==m||p&&p[r])&&(i[r]=e))}),/(bold)/i.test(i["font-weight"])&&(delete i["font-weight"],t.wrap(new r("b",1))),/(italic)/i.test(i["font-style"])&&(delete i["font-style"],t.wrap(new r("i",1))),(i=c.dom.serializeStyle(i,t.name))||null}var m,p,g=d.content;if(g=(g=g.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,"")).replace(/<br class="?Apple-interchange-newline"?>/gi,""),(m=u.paste_retain_style_properties)&&(p=e.makeMap(m.split(/[, ]/))),!1!==u.paste_enable_default_filters&&a(d.content)){d.wordContent=!0,g=i.filter(g,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join("\xa0"):""}]]);var h=u.paste_word_valid_elements;h||(h="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");var b=new n({valid_elements:h,valid_children:"-li[p]"});e.each(b.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var v=new t({},b);v.addAttributeFilter("style",function(e){for(var t,n=e.length;n--;)(t=e[n]).attr("style",f(t,t.attr("style"))),"span"==t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),v.addAttributeFilter("class",function(e){for(var t,n,o=e.length;o--;)n=(t=e[o]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),v.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),v.addNodeFilter("a",function(e){for(var t,n,o,r=e.length;r--;)if(n=(t=e[r]).attr("href"),o=t.attr("name"),n&&-1!=n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||o){if(o&&!/^_?(?:toc|edn|ftn)/i.test(o)){t.unwrap();continue}t.attr({href:n,name:o})}else t.unwrap()});var y=v.parse(g);!1!==u.paste_convert_word_fake_lists&&function(e){function t(e){var n="";if(3===e.type)return e.value;if(e=e.firstChild)do{n+=t(e)}while(e=e.next);return n}function n(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!n(e,t))return!1}while(e=e.next);return!0}function o(e,t,o){var l=e._listLevel||c;l!=c&&(l<c?i&&(i=i.parent.parent):(a=i,i=null)),i&&i.name==t?i.append(e):(a=a||i,i=new r(t,1),o>1&&i.attr("start",""+o),e.wrap(i)),e.name="li",l>c&&a&&a.lastChild.append(i),c=l,function e(t){if(t._listIgnore)t.remove();else if(t=t.firstChild)do{e(t)}while(t=t.next)}(e),n(e,/^\u00a0+/),n(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),n(e,/^\u00a0+/)}for(var i,a,c=1,u=[],d=e.firstChild;"undefined"!=typeof d&&null!==d;)if(u.push(d),null!==(d=d.walk()))for(;"undefined"!=typeof d&&d.parent!==e;)d=d.walk();for(var f=0;f<u.length;f++)if("p"==(e=u[f]).name&&e.firstChild){var m=t(e);if(s(m)){o(e,"ul");continue}if(l(m)){var p=/([0-9]+)\./.exec(m),g=1;p&&(g=parseInt(p[1],10)),o(e,"ol",g);continue}if(e._listLevel){o(e,"ul",1);continue}i=null}else a=i,i=null}(y),d.content=new o({validate:u.validate},b).serialize(y)}})}return c.isWordContent=a,c}),o("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(e,t,n,o){return function(r){function i(e){r.on("BeforePastePreProcess",function(t){t.content=e(t.content)})}e.webkit&&i(function(e){if(n.isWordContent(e))return e;var t=r.settings.paste_webkit_styles;if(!1===r.settings.paste_remove_styles_if_webkit||"all"==t)return e;if(t&&(t=t.split(/[, ]/)),t){var o=r.dom,i=r.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,n,r,a){var l=o.parseStyle(r,"span"),s={};if("none"===t)return n+a;for(var c=0;c<t.length;c++){var u=l[t[c]],d=o.getStyle(i,t[c],!0);/color/.test(t[c])&&(u=o.toHex(u),d=o.toHex(d)),d!=u&&(s[t[c]]=u)}return(s=o.serializeStyle(s,"span"))?n+' style="'+s+'"'+a:n+a})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,o){return t+' style="'+n+'"'+o})}),e.ie&&(i(function(e){if(!n.isWordContent(e))return e;var i=[];t.each(r.schema.getBlockElements(),function(e,t){i.push(t)});var a=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+i.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=o.filter(e,[[a,"$1"]]),o.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}),r.on("PastePostProcess",function(e){r.$("a",e.node).find("font,u").each(function(e,t){r.dom.remove(t,!0)})}))}}),o("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(e,t,n,o){var r;e.add("paste",function(i){function a(){if("text"==s.pasteFormat)s.pasteFormat="html",i.fire("PastePlainTextToggle",{state:!1});else if(s.pasteFormat="text",i.fire("PastePlainTextToggle",{state:!0}),!r&&!1!==i.settings.paste_plaintext_inform){var e=i.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");i.notificationManager.open({text:e,type:"info"}),r=!0}i.focus()}function l(){var e=this;e.active("text"===s.pasteFormat),i.on("PastePlainTextToggle",function(t){e.active(t.state)})}var s,c=this,u=i.settings;return/(^|[ ,])powerpaste([, ]|$)/.test(u.plugins)&&e.get("powerpaste")?void("undefined"!=typeof console&&console.log&&console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.")):(c.clipboard=s=new t(i),c.quirks=new o(i),c.wordFilter=new n(i),i.settings.paste_as_text&&(c.clipboard.pasteFormat="text"),u.paste_preprocess&&i.on("PastePreProcess",function(e){u.paste_preprocess.call(c,c,e)}),u.paste_postprocess&&i.on("PastePostProcess",function(e){u.paste_postprocess.call(c,c,e)}),i.addCommand("mceInsertClipboardContent",function(e,t){t.content&&c.clipboard.pasteHtml(t.content),t.text&&c.clipboard.pasteText(t.text)}),i.settings.paste_block_drop&&i.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),i.settings.paste_data_images||i.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),i.addCommand("mceTogglePlainTextPaste",a),i.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:a,onPostRender:l}),void i.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:s.pasteFormat,onclick:a,onPostRender:l}))})}),function(n){var o,r,a,l,s;for(o=0;o<n.length;o++){r=e,l=(a=n[o]).split(/[.\/]/);for(var c=0;c<l.length-1;++c)r[l[c]]===t&&(r[l[c]]={}),r=r[l[c]];r[l[l.length-1]]=i[a]}if(e.AMDLC_TESTS){for(a in s=e.privateModules||{},i)s[a]=i[a];for(o=0;o<n.length;o++)delete s[n[o]];e.privateModules=s}}(["tinymce/pasteplugin/Utils"])}(window),function(e,t){"use strict";function n(e,t){for(var n,o=[],a=0;a<e.length;++a){if(!(n=i[e[a]]||r(e[a])))throw"module definition dependecy not found: "+e[a];o.push(n)}t.apply(null,o)}function o(e,o,r){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(o===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";n(o,function(){i[e]=r.apply(null,arguments)})}function r(t){for(var n=e,o=t.split(/[.\/]/),r=0;r<o.length;++r){if(!n[o[r]])return;n=n[o[r]]}return n}var i={};o("tinymce/tableplugin/Utils",["tinymce/Env"],function(e){var t=function(e){return function(t,n){t&&(1===(n=parseInt(n,10))||0===n?t.removeAttribute(e,1):t.setAttribute(e,n,1))}},n=function(e){return function(t){return parseInt(t.getAttribute(e)||1,10)}};return{setColSpan:t("colSpan"),setRowSpan:t("rowspan"),getColSpan:n("colSpan"),getRowSpan:n("rowSpan"),setSpanVal:function(e,n,o){t(n)(e,o)},getSpanVal:function(e,t){return n(t)(e)},paddCell:function(t){(!e.ie||e.ie>9)&&(t.hasChildNodes()||(t.innerHTML='<br data-mce-bogus="1" />'))}}}),o("tinymce/tableplugin/SplitCols",["tinymce/util/Tools","tinymce/tableplugin/Utils"],function(e,t){var n=function(e,t,n){return e[n]?e[n][t]:null},o=function(e,t,o){var r=n(e,t,o);return r?r.elm:null},r=function(e,t,r,i){var a,l=0,s=o(e,t,r);for(a=r;(i>0?a<e.length:a>=0)&&s===n(e,t,a).elm;a+=i)l++;return l},i=function(e,t,n){for(var o,r=e[n],i=t;i<r.length;i++)if((o=r[i]).real)return o.elm;return null},a=function(e,n){for(var o,i=[],a=e[n],l=0;l<a.length;l++)i.push({elm:(o=a[l]).elm,above:r(e,l,n,-1)-1,below:r(e,l,n,1)-1}),l+=t.getColSpan(o.elm)-1;return i},l=function(e,n){var o=e.elm.ownerDocument.createElement("td");return t.setColSpan(o,t.getColSpan(e.elm)),t.setRowSpan(o,n),t.paddCell(o),o},s=function(e,t,n,o){var r=i(e,n+1,o);r?r.parentNode.insertBefore(t,r):(r=i(e,0,o)).parentNode.appendChild(t)},c=function(e,n,o,r){if(0!==n.above){t.setRowSpan(n.elm,n.above);var i=l(n,n.below+1);return s(e,i,o,r),i}return null},u=function(e,n,o,r){if(0!==n.below){t.setRowSpan(n.elm,n.above+1);var i=l(n,n.below);return s(e,i,o,r+1),i}return null};return{splitAt:function(t,n,r,i){var l=a(t,r),s=o(t,n,r).parentNode,d=[];return e.each(l,function(e,n){null!==(i?c(t,e,n,r):u(t,e,n,r))&&d.push(d)}),{cells:d,row:s}}}}),o("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils","tinymce/tableplugin/SplitCols"],function(e,n,o,r){var i=e.each,a=o.getSpanVal,l=o.setSpanVal;return function(s,c,u){function d(){s.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function f(e){return e===s.getBody()}function m(t,n){return t?(n=e.map(n.split(","),function(e){return e.toLowerCase()}),e.grep(t.childNodes,function(t){return-1!==e.inArray(n,t.nodeName.toLowerCase())})):[]}function p(){var e=0;z=[],L=0,i(["thead","tbody","tfoot"],function(t){var n=m(m(c,t)[0],"tr");i(n,function(n,o){o+=e,i(m(n,"td,th"),function(e,n){var r,i,l,s;if(z[o])for(;z[o][n];)n++;for(l=a(e,"rowspan"),s=a(e,"colspan"),i=o;i<o+l;i++)for(z[i]||(z[i]=[]),r=n;r<n+s;r++)z[i][r]={part:t,real:i==o&&r==n,elm:e,rowspan:l,colspan:s};L=Math.max(L,n+1)})}),e+=n.length})}function g(e){return s.fire("newrow",{node:e}),e}function h(e){return s.fire("newcell",{node:e}),e}function b(e,t){return(e=e.cloneNode(t)).removeAttribute("id"),e}function v(e,t){var n;if(n=z[t])return n[e]}function y(e,t){return e[t]?e[t]:null}function w(e,t){for(var n=[],o=0;o<e.length;o++)n.push(v(t,o));return n}function x(e){return e&&(!!F.getAttrib(e.elm,"data-mce-selected")||e==u)}function C(){var e=[];return i(c.rows,function(t){i(t.cells,function(n){if(F.getAttrib(n,"data-mce-selected")||u&&n==u.elm)return e.push(t),!1})}),e}function S(t){var r,a={};return!1!==s.settings.table_clone_elements&&(a=e.makeMap((s.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),e.walk(t,function(e){var o;if(3==e.nodeType)return i(F.getParents(e.parentNode,null,t).reverse(),function(e){a[e.nodeName]&&(e=b(e,!1),r?o&&o.appendChild(e):r=o=e,o=e)}),o&&(o.innerHTML=n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),h(t=b(t,!1)),l(t,"rowSpan",1),l(t,"colSpan",1),r?t.appendChild(r):o.paddCell(t),t}function T(){var e,t=F.createRng();return i(F.select("tr",c),function(e){0===e.cells.length&&F.remove(e)}),0===F.select("tr",c).length?(t.setStartBefore(c),t.setEndBefore(c),H.setRng(t),void F.remove(c)):(i(F.select("thead,tbody,tfoot",c),function(e){0===e.rows.length&&F.remove(e)}),p(),void(O&&(e=z[Math.min(z.length-1,O.y)],e&&(H.select(e[Math.min(e.length-1,O.x)].elm,!0),H.collapse(!0)))))}function k(e,t,n,o){var r,i,a,l,s;for(r=z[t][e].elm.parentNode,a=1;a<=n;a++)if(r=F.getNext(r,"tr")){for(i=e;i>=0;i--)if((s=z[t+a][i].elm).parentNode==r){for(l=1;l<=o;l++)F.insertAfter(S(s),s);break}if(-1==i)for(l=1;l<=o;l++)r.insertBefore(S(r.cells[0]),r.cells[0])}}function P(){i(z,function(e,t){i(e,function(e,n){var o,r,i;if(x(e)&&(o=a(e=e.elm,"colspan"),r=a(e,"rowspan"),o>1||r>1)){for(l(e,"rowSpan",1),l(e,"colSpan",1),i=0;i<o-1;i++)F.insertAfter(S(e),e);k(n,t,r-1,o)}})})}function R(e,t,n){for(var o=[],r=0;r<e.length;r++)(r<t||r>n)&&o.push(e[r]);return o}function _(t){return e.grep(t,function(e){return!1===e.real})}function A(e){for(var t=[],n=0;n<e.length;n++){var o=e[n].elm;t[t.length-1]!==o&&t.push(o)}return t}function B(t,n,r,i,a){var l=0;if(a-r<1)return 0;for(var s=r+1;s<=a;s++){var c=R(y(t,s),n,i),u=_(c);c.length===u.length&&(e.each(A(u),function(e){o.setRowSpan(e,o.getRowSpan(e)-1)}),l++)}return l}function N(t,n,r,i,a){var l=0;if(i-n<1)return 0;for(var s=n+1;s<=i;s++){var c=R(w(t,s),r,a),u=_(c);c.length===u.length&&(e.each(A(u),function(e){o.setColSpan(e,o.getColSpan(e)-1)}),l++)}return l}function D(e){var n,o,r,s,c,u,d,f,m,p;if(i(z,function(o,r){if(i(o,function(t){if(x(t)&&(u=g(b(c=(t=t.elm).parentNode,!1)),n=r,e))return!1}),e)return n===t}),n!==t){for(s=0,p=0;s<z[0].length;s+=p)if(z[n][s]&&(p=a(o=z[n][s].elm,"colspan"),o!=r)){if(e){if(n>0&&z[n-1][s]&&(m=a(f=z[n-1][s].elm,"rowSpan"))>1){l(f,"rowSpan",m+1);continue}}else if((m=a(o,"rowspan"))>1){l(o,"rowSpan",m+1);continue}d=S(o),l(d,"colSpan",o.colSpan),u.appendChild(d),r=o}u.hasChildNodes()&&(e?c.parentNode.insertBefore(u,c):F.insertAfter(u,c))}}function M(e){var n,o;i(z,function(o){if(i(o,function(t,o){if(x(t)&&(n=o,e))return!1}),e)return n===t}),i(z,function(t,r){var i,s,c;t[n]&&(i=t[n].elm)!=o&&(c=a(i,"colspan"),s=a(i,"rowspan"),1==c?e?(i.parentNode.insertBefore(S(i),i),k(n,r,s-1,c)):(F.insertAfter(S(i),i),k(n,r,s-1,c)):l(i,"colSpan",i.colSpan+1),o=i)})}function I(e){var t=[];return i(e,function(e){i(e,function(e){t.push(e)})}),t}function E(e){var t;return i(z,function(n,o){return i(n,function(n,r){if(n.elm==e)return t={x:r,y:o},!1}),!t}),t}var z,L,O,U,H=s.selection,F=H.dom;c=c||F.getParent(H.getStart(!0),"table"),p(),(u=u||F.getParent(H.getStart(!0),"th,td"))&&(O=E(u),U=function(){var e,t;return e=t=0,i(z,function(n,o){i(n,function(n,r){var i,a;x(n)&&(n=z[o][r],r>e&&(e=r),o>t&&(t=o),n.real&&(a=n.rowspan-1,(i=n.colspan-1)&&r+i>e&&(e=r+i),a&&o+a>t&&(t=o+a)))})}),{x:e,y:t}}(),u=v(O.x,O.y)),e.extend(this,{deleteTable:function(){var e=F.createRng();f(c)||(e.setStartAfter(c),e.setEndAfter(c),H.setRng(e),F.remove(c))},split:P,merge:function(t,n,o){var r,a,s,c,u,d,f,m,g,h,b,y,w;if(t?(c=(a=(r=E(t)).x)+(n-1),u=(s=r.y)+(o-1)):(O=U=null,i(z,function(e,t){i(e,function(e,n){x(e)&&(O||(O={x:n,y:t}),U={x:n,y:t})})}),O&&(a=O.x,s=O.y,c=U.x,u=U.y)),m=v(a,s),g=v(c,u),m&&g&&m.part==g.part){P(),p(),y=B(z,a,s,c,u),w=N(z,a,s,c,u),m=v(a,s).elm;var C=c-a-w+1,S=u-s-y+1;for(C===L&&S===z.length&&(C=1,S=1),C===L&&S>1&&(S=1),l(m,"colSpan",C),l(m,"rowSpan",S),f=s;f<=u;f++)for(d=a;d<=c;d++)z[f]&&z[f][d]&&(t=z[f][d].elm)!=m&&(h=e.grep(t.childNodes),i(h,function(e){m.appendChild(e)}),h.length&&(h=e.grep(m.childNodes),b=0,i(h,function(e){"BR"==e.nodeName&&b++<h.length-1&&m.removeChild(e)})),F.remove(t));T()}},insertRow:D,insertRows:function(e,t){t=t||C().length||1;for(var n=0;n<t;n++)D(e)},insertCol:M,insertCols:function(e,t){t=t||function(){var e=0;return i(z,function(t){if(i(t,function(t){x(t)&&e++}),e)return!1}),e}()||1;for(var n=0;n<t;n++)M(e)},splitCols:function(t){if(O){var n=r.splitAt(z,O.x,O.y,t);e.each(n.cells,h)}},deleteCols:function(){var t=[];if(f(c)){if(1==z[0].length)return;if(e.grep(I(z),x).length==I(z).length)return}i(z,function(n){i(n,function(n,o){x(n)&&-1===e.inArray(t,o)&&(i(z,function(e){var t,n=e[o].elm;(t=a(n,"colSpan"))>1?l(n,"colSpan",t-1):F.remove(n)}),t.push(o))})}),T()},deleteRows:function(){var e;e=C(),f(c)&&e.length==c.rows.length||(i(e.reverse(),function(e){!function(e){var t,n;i(e.cells,function(e){var n=a(e,"rowSpan");n>1&&(l(e,"rowSpan",n-1),k((t=E(e)).x,t.y,1,1))}),t=E(e.cells[0]),i(z[t.y],function(e){var t;(e=e.elm)!=n&&((t=a(e,"rowSpan"))<=1?F.remove(e):l(e,"rowSpan",t-1),n=e)})}(e)}),T())},cutRows:function(){var e=C();if(!f(c)||e.length!=c.rows.length)return F.remove(e),T(),e},copyRows:function(){var e=C();return i(e,function(t,n){e[n]=b(t,!0)}),e},pasteRows:function(t,n){var o,a,s;t&&(o=r.splitAt(z,O.x,O.y,n),a=o.row,e.each(o.cells,h),s=e.map(t,function(e){return e.cloneNode(!0)}),n||s.reverse(),i(s,function(e){var t,o,r=e.cells.length;for(g(e),t=0;t<r;t++)h(o=e.cells[t]),l(o,"colSpan",1),l(o,"rowSpan",1);for(t=r;t<L;t++)e.appendChild(h(S(e.cells[r-1])));for(t=L;t<r;t++)F.remove(e.cells[t]);n?a.parentNode.insertBefore(e,a):F.insertAfter(e,a)}),d())},getPos:E,setStartCell:function(e){O=E(e)},setEndCell:function(e){var t,n,o,r,i,a,l,s,c,u;if(U=E(e),O&&U){for(t=Math.min(O.x,U.x),n=Math.min(O.y,U.y),i=o=Math.max(O.x,U.x),a=r=Math.max(O.y,U.y),u=n;u<=r;u++)for(c=t;c<=o;c++)(e=z[u][c]).real&&(s=e.rowspan-1,(l=e.colspan-1)&&c+l>i&&(i=c+l),s&&u+s>a&&(a=u+s));for(d(),u=n;u<=a;u++)for(c=t;c<=i;c++)z[u][c]&&F.setAttrib(z[u][c].elm,"data-mce-selected","1")}},moveRelIdx:function(e,t){var n,o,r;o=(n=E(e)).y*L+n.x;do{if(!(r=v((o+=t)%L,Math.floor(o/L))))break;if(r.elm!=e)return H.select(r.elm,!0),F.isEmpty(r.elm)&&H.collapse(!0),!0}while(r.elm==e);return!1},refresh:p})}}),o("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(e,t,n,o,r){var i=o.each,a=r.getSpanVal;return function(l){function s(){l.on("KeyDown",function(e){var t,n,o=l.dom;37!=e.keyCode&&38!=e.keyCode||(t=l.selection.getRng(),(n=o.getParent(t.startContainer,"table"))&&l.getBody().firstChild==n&&function(e,t){var n,o=t.ownerDocument,r=o.createRange();return r.setStartBefore(t),r.setEnd(e.endContainer,e.endOffset),(n=o.createElement("body")).appendChild(r.cloneContents()),0===n.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}(t,n)&&((t=o.createRng()).setStartBefore(n),t.setEndBefore(n),l.selection.setRng(t),e.preventDefault()))})}function c(){l.on("KeyDown SetContent VisualAid",function(){var e;for(e=l.getBody().lastChild;e;e=e.previousSibling)if(3==e.nodeType){if(e.nodeValue.length>0)break}else if(1==e.nodeType&&("BR"==e.tagName||!e.getAttribute("data-mce-bogus")))break;e&&"TABLE"==e.nodeName&&(l.settings.forced_root_block?l.dom.add(l.getBody(),l.settings.forced_root_block,l.settings.forced_root_block_attrs,n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):l.dom.add(l.getBody(),"br",{"data-mce-bogus":"1"}))}),l.on("PreProcess",function(e){var t=e.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||"\xa0"==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&l.dom.remove(t)})}(function(){function t(e){l.selection.select(e,!0),l.selection.collapse(!0)}function n(e){l.$(e).empty(),r.paddCell(e)}l.on("keydown",function(r){var i,a,s,c;if((r.keyCode==e.DELETE||r.keyCode==e.BACKSPACE)&&!r.isDefaultPrevented()&&(i=l.dom.getParent(l.selection.getStart(),"table"))){if(a=l.dom.select("td,th",i),0===(s=o.grep(a,function(e){return!!l.dom.getAttrib(e,"data-mce-selected")})).length)return c=l.dom.getParent(l.selection.getStart(),"td,th"),void(l.selection.isCollapsed()&&c&&l.dom.isEmpty(c)&&(r.preventDefault(),n(c),t(c)));r.preventDefault(),l.undoManager.transact(function(){a.length==s.length?l.execCommand("mceTableDelete"):(o.each(s,n),t(s[0]))})}})})(),function(){var t=function(e,t){var n=l.selection.getRng(),o=e.ownerDocument.createTextNode("\xa0");n.startOffset?e.insertBefore(o,e.firstChild):e.appendChild(o),t&&(l.selection.select(o,!0),l.selection.collapse(!0))},o=function(t){return(t.keyCode==e.DELETE||t.keyCode==e.BACKSPACE)&&!t.isDefaultPrevented()},r=function(e){return e.firstChild===e.lastChild&&e.firstChild},i=function(e){return e&&3===e.nodeType},a=function(e){var t=r(e);return i(t)&&1===t.data.length?t.data:null},s=function(e){var t=r(e),n=a(e);return t&&!i(t)||n&&!u(n)},c=function(e){return l.dom.isEmpty(e)||u(a(e))},u=function(e){return"\xa0"===e};l.on("keydown",function(e){if(o(e)){var r=l.dom.getParent(l.selection.getStart(),"caption");r&&"CAPTION"==r.nodeName&&"TABLE"==r.parentNode.nodeName&&(n.ie&&(l.selection.isCollapsed()?s(r)&&t(r):(l.undoManager.transact(function(){l.execCommand("Delete"),c(r)&&t(r,!0)}),e.preventDefault())),c(r)&&e.preventDefault())}})}(),n.webkit&&(function(){function n(n){function o(e,t){var o=e?"previousSibling":"nextSibling",i=l.dom.getParent(t,"tr"),a=i[o];if(a)return m(0,t,a,e),n.preventDefault(),!0;var c=l.dom.getParent(i,"table"),u=i.parentNode,d=u.nodeName.toLowerCase();if("tbody"===d||d===(e?"tfoot":"thead")){var f=function(e,t,n,o){var r=l.dom.select(">tbody",t),i=r.indexOf(n);return e&&0===i||!e&&i===r.length-1?function(e,t){var n=l.dom.select(">"+(e?"thead":"tfoot"),t);return 0!==n.length?n[0]:null}(e,t):-1===i?r["thead"===n.tagName.toLowerCase()?0:r.length-1]:r[i+(e?-1:1)]}(e,c,u);if(null!==f)return r(e,f,t)}return s(e,i,o,c)}function r(e,t,o){var r=c(t,e);return r&&m(0,o,r,e),n.preventDefault(),!0}function s(e,t,r,i){var a=i[r];if(a)return u(a),!0;var s=l.dom.getParent(i,"td,th");return s?o(e,s):(u(c(t,!e)),n.preventDefault(),!1)}function c(e,t){var n=e&&e[t?"lastChild":"firstChild"];return n&&"BR"===n.nodeName?l.dom.getParent(n,"td,th"):n}function u(e){l.selection.setCursorLocation(e,0)}function d(e){for(var t=0,n=e;n.previousSibling;)t+=a(n=n.previousSibling,"colspan");return t}function f(e,t){var n=0,o=0;return i(e.children,function(e,r){if(n+=a(e,"colspan"),o=r,n>t)return!1}),o}function m(e,t,n,o){var r=f(n,d(l.dom.getParent(t,"td,th"))),i=n.childNodes[r];u(c(i,o)||i)}var p=n.keyCode;if((p==e.UP||p==e.DOWN)&&function(e){var t=e.selection.getNode();return null!==e.dom.getParent(t,"tr")}(l)){var g=l.selection.getNode();t.setEditorTimeout(l,function(){(function(e){var t=l.selection.getNode(),n=l.dom.getParent(t,"td,th"),o=l.dom.getParent(e,"td,th");return n&&n!==o&&function(e,t){return l.dom.getParent(n,"TABLE")===l.dom.getParent(t,"TABLE")}(0,o)})(g)&&o(!n.shiftKey&&p===e.UP,g)},0)}}l.on("KeyDown",function(e){n(e)})}(),function(){function e(){var e=l.selection.getRng(),t=l.selection.getNode(),n=l.dom.getParent(e.startContainer,"TD,TH");if(function(e,t,n,o){var r,i=l.dom.getParent(t.startContainer,"TABLE");return i&&(r=i.parentNode),3==t.startContainer.nodeType&&0===t.startOffset&&0===t.endOffset&&o&&("TR"==n.nodeName||n==r)||("TD"==n.nodeName||"TH"==n.nodeName)&&!o}(0,e,t,n)){n||(n=t);for(var o=n.lastChild;o.lastChild;)o=o.lastChild;3==o.nodeType&&(e.setEnd(o,o.data.length),l.selection.setRng(e))}}l.on("KeyDown",function(){e()}),l.on("MouseDown",function(t){2!=t.button&&e()})}()),n.gecko&&(s(),c()),n.ie>9&&(s(),c())}}),o("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(e,t,n){return function(o,r){function i(e){o.getBody().style.webkitUserSelect="",(e||g)&&(o.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),g=!1)}function a(e,t){return!(!e||!t)&&e===p.getParent(t,"table")}function l(t){var n,i,l=t.target;if(!f&&!m&&l!==d&&(d=l,u&&c)){if(i=p.getParent(l,"td,th"),a(u,i)||(i=p.getParent(u,"td,th")),c===i&&!g)return;if(r(!0),a(u,i)){t.preventDefault(),s||(s=new e(o,u,c),o.getBody().style.webkitUserSelect="none"),s.setEndCell(i),g=!0,n=o.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(e){}}}}var s,c,u,d,f,m,p=o.dom,g=!0,h=function(){c=s=u=d=null,r(!1)};return o.on("SelectionChange",function(e){g&&e.stopImmediatePropagation()},!0),o.on("MouseDown",function(e){2==e.button||f||m||(i(),c=p.getParent(e.target,"td,th"),u=p.getParent(c,"table"))}),o.on("mouseover",l),o.on("remove",function(){p.unbind(o.getDoc(),"mouseover",l),i()}),o.on("MouseUp",function(){function e(e,o){var i=new t(e,e);do{if(3==e.nodeType&&0!==n.trim(e.nodeValue).length)return void(o?r.setStart(e,0):r.setEnd(e,e.nodeValue.length));if("BR"==e.nodeName)return void(o?r.setStartBefore(e):r.setEndBefore(e))}while(e=o?i.next():i.prev())}var r,i,a,l,u,d=o.selection;if(c){if(s&&(o.getBody().style.webkitUserSelect=""),(i=p.select("td[data-mce-selected],th[data-mce-selected]")).length>0){(r=p.createRng()).setStartBefore(l=i[0]),r.setEndAfter(l),e(l,1),a=new t(l,p.getParent(i[0],"table"));do{if("TD"==l.nodeName||"TH"==l.nodeName){if(!p.getAttrib(l,"data-mce-selected"))break;u=l}}while(l=a.next());e(u),d.setRng(r)}o.nodeChanged(),h()}}),o.on("KeyUp Drop SetContent",function(e){i("setcontent"==e.type),h(),f=!1}),o.on("ObjectResizeStart ObjectResized",function(e){f="objectresized"!=e.type}),o.on("dragstart",function(){m=!0}),o.on("drop dragend",function(){m=!1}),{clear:i}}}),o("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(e,t){var n=e.each;return function(o){function r(){var e=o.settings.color_picker_callback;if(e)return function(){var t=this;e.call(o,function(e){t.value(e).fire("change")},t.value())}}function i(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){u(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:r()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:r()}]}]}}function a(e){return e?e.replace(/px$/,""):""}function l(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function s(e){n("left center right".split(" "),function(t){o.formatter.remove("align"+t,{},e)})}function c(t,n,o){return function t(o,r){return r=r||[],e.each(o,function(e){var o={text:e.text||e.title};e.menu?o.menu=t(e.menu):(o.value=e.value,n&&n(o)),r.push(o)}),r}(t,o||[])}function u(e,t,n){var o=t.toJSON(),r=e.parseStyle(o.style);n?(t.find("#borderColor").value(r["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(r["background-color"]||"")[0].fire("change")):(r["border-color"]=o.borderColor,r["background-color"]=o.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(r))))}function d(e,t,n){var o=e.parseStyle(e.getAttrib(n,"style"));o["border-color"]&&(t.borderColor=o["border-color"]),o["background-color"]&&(t.backgroundColor=o["background-color"]),t.style=e.serializeStyle(o)}function f(e,t,o){var r=e.parseStyle(e.getAttrib(t,"style"));n(o,function(e){r[e.name]=e.value}),e.setAttrib(t,"style",e.serializeStyle(e.parseStyle(e.serializeStyle(r))))}var m=this;m.tableProps=function(){m.table(!0)},m.table=function(r){function m(){function n(e,t,o){if("TD"===e.tagName||"TH"===e.tagName)x.setStyle(e,t,o);else if(e.children)for(var r=0;r<e.children.length;r++)n(e.children[r],t,o)}var r;u(x,this),!1===(C=e.extend(C,this.toJSON())).class&&delete C.class,o.undoManager.transact(function(){if(g||(g=o.plugins.table.insertTable(C.cols||1,C.rows||1)),o.dom.setAttribs(g,{style:C.style,class:C.class}),o.settings.table_style_by_css){if((w=[]).push({name:"border",value:C.border}),w.push({name:"border-spacing",value:l(C.cellspacing)}),f(x,g,w),x.setAttribs(g,{"data-mce-border-color":C.borderColor,"data-mce-cell-padding":C.cellpadding,"data-mce-border":C.border}),g.children)for(var e=0;e<g.children.length;e++)n(g.children[e],"border",C.border),n(g.children[e],"padding",l(C.cellpadding))}else o.dom.setAttribs(g,{border:C.border,cellpadding:C.cellpadding,cellspacing:C.cellspacing});x.getAttrib(g,"width")&&!o.settings.table_style_by_css?x.setAttrib(g,"width",a(C.width)):x.setStyle(g,"width",l(C.width)),x.setStyle(g,"height",l(C.height)),(r=x.select("caption",g)[0])&&!C.caption&&x.remove(r),!r&&C.caption&&((r=x.create("caption")).innerHTML=t.ie?"\xa0":'<br data-mce-bogus="1"/>',g.insertBefore(r,g.firstChild)),s(g),C.align&&o.formatter.apply("align"+C.align,{},g),o.focus(),o.addVisual()})}function p(e,t){return function(e,n){for(var o=0;o<n.length;o++){var r=x.getStyle(n[o],t);if("undefined"==typeof e&&(e=r),e!=r)return""}return e}(void 0,o.dom.select("td,th",e))}var g,h,b,v,y,w,x=o.dom,C={};!0===r?(g=x.getParent(o.selection.getStart(),"table"))&&(C={width:a(x.getStyle(g,"width")||x.getAttrib(g,"width")),height:a(x.getStyle(g,"height")||x.getAttrib(g,"height")),cellspacing:a(x.getStyle(g,"border-spacing")||x.getAttrib(g,"cellspacing")),cellpadding:x.getAttrib(g,"data-mce-cell-padding")||x.getAttrib(g,"cellpadding")||p(g,"padding"),border:x.getAttrib(g,"data-mce-border")||x.getAttrib(g,"border")||p(g,"border"),borderColor:x.getAttrib(g,"data-mce-border-color"),caption:!!x.select("caption",g)[0],class:x.getAttrib(g,"class")},n("left center right".split(" "),function(e){o.formatter.matchNode(g,"align"+e)&&(C.align=e)})):(h={label:"Cols",name:"cols"},b={label:"Rows",name:"rows"}),o.settings.table_class_list&&(C.class&&(C.class=C.class.replace(/\s*mce\-item\-table\s*/g,"")),v={name:"class",type:"listbox",label:"Class",values:c(o.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"table",classes:[e.value]})})})}),y={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==o.settings.table_appearance_options?[h,b,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[h,b,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},v]},!1!==o.settings.table_advtab?(d(x,C,g),o.windowManager.open({title:"Table properties",data:C,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},i(x)],onsubmit:m})):o.windowManager.open({title:"Table properties",data:C,body:y,onsubmit:m})},m.merge=function(e,t){o.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var n=this.toJSON();o.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})},m.cell=function(){function t(e,t,n){(1===b.length||n)&&h.setAttrib(e,t,n)}function r(e,t,n){(1===b.length||n)&&h.setStyle(e,t,n)}function f(){u(h,this),p=e.extend(p,this.toJSON()),o.undoManager.transact(function(){n(b,function(e){t(e,"scope",p.scope),t(e,"style",p.style),t(e,"class",p.class),r(e,"width",l(p.width)),r(e,"height",l(p.height)),p.type&&e.nodeName.toLowerCase()!==p.type&&(e=h.rename(e,p.type)),1===b.length&&(s(e),function(e){n("top middle bottom".split(" "),function(t){o.formatter.remove("valign"+t,{},e)})}(e)),p.align&&o.formatter.apply("align"+p.align,{},e),p.valign&&o.formatter.apply("valign"+p.valign,{},e)}),o.focus()})}var m,p,g,h=o.dom,b=[];if(b=o.dom.select("td[data-mce-selected],th[data-mce-selected]"),m=o.dom.getParent(o.selection.getStart(),"td,th"),!b.length&&m&&b.push(m),m=m||b[0]){b.length>1?p={width:"",height:"",scope:"",class:"",align:"",style:"",type:m.nodeName.toLowerCase()}:((p={width:a(h.getStyle(m,"width")||h.getAttrib(m,"width")),height:a(h.getStyle(m,"height")||h.getAttrib(m,"height")),scope:h.getAttrib(m,"scope"),class:h.getAttrib(m,"class")}).type=m.nodeName.toLowerCase(),n("left center right".split(" "),function(e){o.formatter.matchNode(m,"align"+e)&&(p.align=e)}),n("top middle bottom".split(" "),function(e){o.formatter.matchNode(m,"valign"+e)&&(p.valign=e)}),d(h,p,m)),o.settings.table_cell_class_list&&(g={name:"class",type:"listbox",label:"Class",values:c(o.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"td",classes:[e.value]})})})});var v={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},g]};o.windowManager.open(!1!==o.settings.table_cell_advtab?{title:"Cell properties",bodyType:"tabpanel",data:p,body:[{title:"General",type:"form",items:v},i(h)],onsubmit:f}:{title:"Cell properties",data:p,body:v,onsubmit:f})}},m.row=function(){function t(e,t,n){(1===y.length||n)&&v.setAttrib(e,t,n)}function r(){var r,i,a;u(v,this),h=e.extend(h,this.toJSON()),o.undoManager.transact(function(){var e=h.type;n(y,function(n){t(n,"scope",h.scope),t(n,"style",h.style),t(n,"class",h.class),function(e,t,n){(1===y.length||n)&&v.setStyle(e,"height",n)}(n,0,l(h.height)),e!==n.parentNode.nodeName.toLowerCase()&&(r=v.getParent(n,"table"),i=n.parentNode,(a=v.select(e,r)[0])||(a=v.create(e),r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a)),a.appendChild(n),i.hasChildNodes()||v.remove(i)),1===y.length&&s(n),h.align&&o.formatter.apply("align"+h.align,{},n)}),o.focus()})}var f,m,p,g,h,b,v=o.dom,y=[];f=o.dom.getParent(o.selection.getStart(),"table"),m=o.dom.getParent(o.selection.getStart(),"td,th"),n(f.rows,function(e){n(e.cells,function(t){if(v.getAttrib(t,"data-mce-selected")||t==m)return y.push(e),!1})}),(p=y[0])&&(y.length>1?h={height:"",scope:"",class:"",align:"",type:p.parentNode.nodeName.toLowerCase()}:((h={height:a(v.getStyle(p,"height")||v.getAttrib(p,"height")),scope:v.getAttrib(p,"scope"),class:v.getAttrib(p,"class")}).type=p.parentNode.nodeName.toLowerCase(),n("left center right".split(" "),function(e){o.formatter.matchNode(p,"align"+e)&&(h.align=e)}),d(v,h,p)),o.settings.table_row_class_list&&(g={name:"class",type:"listbox",label:"Class",values:c(o.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"tr",classes:[e.value]})})})}),b={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},g]},o.windowManager.open(!1!==o.settings.table_row_advtab?{title:"Row properties",data:h,bodyType:"tabpanel",body:[{title:"General",type:"form",items:b},i(v)],onsubmit:r}:{title:"Row properties",data:h,body:b,onsubmit:r}))}}}),o("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(e,n){var o;return function(r){function i(e,t){return{index:e,y:r.dom.getPos(t).y}}function a(e,t){return{index:e,y:r.dom.getPos(t).y+t.offsetHeight}}function l(e,t){return{index:e,x:r.dom.getPos(t).x}}function s(e,t){return{index:e,x:r.dom.getPos(t).x+t.offsetWidth}}function c(){return"rtl"===r.getBody().dir}function u(){return function(){return r.inline}?r.getBody().ownerDocument.body:r.getBody()}function d(e,t){return c()?s(e,t):l(e,t)}function f(e,t){return c()?l(e,t):s(e,t)}function m(e,t){var n=r.dom.getStyle(e,t,!0);return parseInt(n,10)}function p(e){return m(e,"width")/m(e.parentElement,"width")*100}function g(e,t,n){for(var o=[],r=1;r<n.length;r++)o.push(e(r-1,n[r].element));return o.push(t(n.length-1,n[n.length-1].element)),o}function h(){var t=r.dom.select("."+re,u());e.each(t,function(e){r.dom.remove(e)})}function b(e){h(),R(e)}function v(e,t,n,o,r,i,a,l){var s={"data-mce-bogus":"all",class:re+" "+e,unselectable:"on","data-mce-resize":!1,style:"cursor: "+t+"; margin: 0; padding: 0; position: absolute; left: "+n+"px; top: "+o+"px; height: "+r+"px; width: "+i+"px; "};return s[a]=l,s}function y(t,n,o){e.each(t,function(e){var t=o.x,i=e.y-me/2,a=me,l=n;r.dom.add(u(),"div",v(ie,ae,t,i,a,l,le,e.index))})}function w(t,n,o){e.each(t,function(e){var t=e.x-me/2,i=o.y,a=n,l=me;r.dom.add(u(),"div",v(ce,ue,t,i,a,l,de,e.index))})}function x(t){return e.map(t.rows,function(t){return{element:t,cells:e.map(t.cells,function(e){return{element:e,rowspan:e.hasAttribute("rowspan")?parseInt(e.getAttribute("rowspan"),10):1,colspan:e.hasAttribute("colspan")?parseInt(e.getAttribute("colspan"),10):1}})}})}function C(n){function o(e,t){return e+","+t}var r={},i=[],a=0,l=0;return e.each(n,function(n,s){var c=[];e.each(n.cells,function(e){for(var n=0;r[o(s,n)]!==t;)n++;for(var i={element:e.element,colspan:e.colspan,rowspan:e.rowspan,rowIndex:s,colIndex:n},u=0;u<e.colspan;u++)for(var d=0;d<e.rowspan;d++){var f=s+d,m=n+u;r[o(f,m)]=i,a=Math.max(a,f+1),l=Math.max(l,m+1)}c.push(i)}),i.push({element:n.element,cells:c})}),{grid:{maxRows:a,maxCols:l},getAt:function(e,t){return r[o(e,t)]},getAllCells:function(){var t=[];return e.each(i,function(e){t=t.concat(e.cells)}),t},getAllRows:function(){return i}}}function S(e,t){for(var n=[],o=e;o<t;o++)n.push(o);return n}function T(e,t,n){for(var o,r=e(),i=0;i<r.length;i++)t(r[i])&&(o=r[i]);return o||n()}function k(t){var n=S(0,t.grid.maxCols),o=S(0,t.grid.maxRows);return e.map(n,function(e){return T(function(){for(var n=[],r=0;r<o.length;r++){var i=t.getAt(r,e);i&&i.colIndex===e&&n.push(i)}return n},function(e){return 1===e.colspan},function(){for(var n,r=0;r<o.length;r++)if(n=t.getAt(r,e))return n;return null})})}function P(t){var n=S(0,t.grid.maxCols),o=S(0,t.grid.maxRows);return e.map(o,function(e){return T(function(){for(var o=[],r=0;r<n.length;r++){var i=t.getAt(e,r);i&&i.rowIndex===e&&o.push(i)}return o},function(e){return 1===e.rowspan},function(){return t.getAt(e,0)})})}function R(e){var t=C(x(e)),n=P(t),o=k(t),l=r.dom.getPos(e),s=n.length>0?g(i,a,n):[],c=o.length>0?g(d,f,o):[];y(s,e.offsetWidth,l),w(c,e.offsetHeight,l)}function _(e,t,n,o){if(t<0||t>=e.length-1)return"";var r=e[t];if(r)r={value:r,delta:0};else for(var i=e.slice(0,t).reverse(),a=0;a<i.length;a++)i[a]&&(r={value:i[a],delta:a+1});var l=e[t+1];if(l)l={value:l,delta:1};else for(var s=e.slice(t+1),c=0;c<s.length;c++)s[c]&&(l={value:s[c],delta:c+1});var u=l.delta-r.delta,d=Math.abs(l.value-r.value)/u;return n?d/m(o,"width")*100:d}function A(e,t){var n=r.dom.getStyle(e,t);return n||(n=r.dom.getAttrib(e,t)),n||(n=r.dom.getStyle(e,t,!0)),n}function B(e,t,n){var o=A(e,"width"),r=parseInt(o,10),i=t?function(e,t){return m(e,"width")/m(t,"width")*100}(e,n):m(e,"width");return(t&&!U(o)||!t&&!H(o))&&(r=0),!isNaN(r)&&r>0?r:i}function N(t,n,o){for(var r=k(t),i=e.map(r,function(e){return d(e.colIndex,e.element).x}),a=[],l=0;l<r.length;l++){var s=(r[l].element.hasAttribute("colspan")?parseInt(r[l].element.getAttribute("colspan"),10):1)>1?_(i,l):B(r[l].element,n,o);a.push(s=s||pe)}return a}function D(e){var t=A(e,"height"),n=parseInt(t,10);return U(t)&&(n=0),!isNaN(n)&&n>0?n:m(e,"height")}function M(t){for(var n=P(t),o=e.map(n,function(e){return i(e.rowIndex,e.element).y}),r=[],a=0;a<n.length;a++){var l=(n[a].element.hasAttribute("rowspan")?parseInt(n[a].element.getAttribute("rowspan"),10):1)>1?_(o,a):D(n[a].element);r.push(l=l||ge)}return r}function I(t,n,o,r,i){function a(t){return e.map(t,function(){return 0})}function l(e,t){var n,i=a(s.slice(0,e)),l=a(s.slice(t+1));if(o>=0){var c=Math.max(r,s[t]-o);n=i.concat([o,c-s[t]]).concat(l)}else{var u=Math.max(r,s[e]+o);n=i.concat([u-s[e],s[e]-u]).concat(l)}return n}var s=t.slice(0);return 0===t.length?[]:1===t.length?i?[100-s[0]]:[Math.max(r,s[0]+o)-s[0]]:0===n?l(0,1):n>0&&n<t.length-1?l(n,n+1):n===t.length-1?function(e,t){var n,i=a(s.slice(0,t));if(o>=0)n=i.concat([o]);else{var l=Math.max(r,s[t]+o);n=i.concat([l-s[t]])}return n}(0,n):[]}function E(e,t,n){for(var o=0,r=e;r<t;r++)o+=n[r];return o}function z(t,n){var o=t.getAllCells();return e.map(o,function(e){var t=E(e.colIndex,e.colIndex+e.colspan,n);return{element:e.element,width:t,colspan:e.colspan}})}function L(t,n){var o=t.getAllCells();return e.map(o,function(e){var t=E(e.rowIndex,e.rowIndex+e.rowspan,n);return{element:e.element,height:t,rowspan:e.rowspan}})}function O(t,n){var o=t.getAllRows();return e.map(o,function(e,t){return{element:e.element,height:n[t]}})}function U(e){return be.test(e)}function H(e){return ve.test(e)}function F(t,n,o){for(var i=C(x(t)),a=U(t.width)||U(t.style.width),l=N(i,a,t),s=a?function(e,t){return n/m(e,"width")*100}(t):n,c=I(l,o,s,pe,a),u=[],d=0;d<c.length;d++)u.push(c[d]+l[d]);var f=z(i,u),g=a?"%":"px",h=a?o<i.grid.maxCols-1?p(t):p(t)+function(e,t){return n/m(e.parentElement,"width")*100}(t):o<i.grid.maxCols-1?m(t,"width"):m(t,"width")+n;r.undoManager.transact(function(){var n;n=g,e.each(f,function(e){r.dom.setStyle(e.element,"width",e.width+n),r.dom.setAttrib(e.element,"width",null)}),o!=i.grid.maxCols-1&&a||(r.dom.setStyle(t,"width",h+g),r.dom.setAttrib(t,"width",null))})}function W(t,n,o){for(var i=C(x(t)),a=M(i),l=[],s=0,c=0;c<a.length;c++)l.push(c===o?n+a[c]:a[c]),s+=s[c];var u=L(i,l),d=O(i,l);r.undoManager.transact(function(){e.each(d,function(e){r.dom.setStyle(e.element,"height",e.height+"px"),r.dom.setAttrib(e.element,"height",null)}),e.each(u,function(e){r.dom.setStyle(e.element,"height",e.height+"px"),r.dom.setAttrib(e.element,"height",null)}),r.dom.setStyle(t,"height",s+"px"),r.dom.setAttrib(t,"height",null)})}function K(){if(r.dom.remove(ee),Z){var e,t;if(r.dom.removeClass(te,he),Z=!1,V(te)){var n=parseInt(r.dom.getAttrib(te,fe),10),i=r.dom.getPos(te).x;e=parseInt(r.dom.getAttrib(te,de),10),t=c()?n-i:i-n,Math.abs(t)>=1&&F(o,t,e)}else if(j(te)){var a=parseInt(r.dom.getAttrib(te,se),10),l=r.dom.getPos(te).y;e=parseInt(r.dom.getAttrib(te,le),10),t=l-a,Math.abs(t)>=1&&W(o,t,e)}b(o),r.nodeChanged()}}function $(e,t){ee=ee||function(){var e=document.createElement("div");return e.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),e.setAttribute("data-mce-bogus","all"),e}(),Z=!0,r.dom.addClass(e,he),te=e,function(e,t){r.dom.bind(e,"mouseup",function(){K()}),r.dom.bind(e,"mousemove",function(e){clearTimeout(Q),Z&&t(e)}),r.dom.bind(e,"mouseout",function(){Q=setTimeout(function(){K()},200)})}(ee,t),r.dom.add(u(),ee)}function V(e){return r.dom.hasClass(e,ce)}function j(e){return r.dom.hasClass(e,ie)}function G(e){var n=e.clientX-(ne=ne!==t?ne:e.clientX);ne=e.clientX;var o=r.dom.getPos(te).x;r.dom.setStyle(te,"left",o+n+"px")}function X(e){var n=e.clientY-(oe=oe!==t?oe:e.clientY);oe=e.clientY;var o=r.dom.getPos(te).y;r.dom.setStyle(te,"top",o+n+"px")}function Y(e){ne=t,$(e,G)}function J(e){oe=t,$(e,X)}function q(e){var t=e.target,n=r.getBody();if(r.$.contains(n,o)||o===n)if(V(t)){e.preventDefault();var i=r.dom.getPos(t).x;r.dom.setAttrib(t,fe,i),Y(t)}else if(j(t)){e.preventDefault();var a=r.dom.getPos(t).y;r.dom.setAttrib(t,se,a),J(t)}else h()}var Q,Z,ee,te,ne,oe,re="mce-resize-bar",ie="mce-resize-bar-row",ae="row-resize",le="data-row",se="data-initial-top",ce="mce-resize-bar-col",ue="col-resize",de="data-col",fe="data-initial-left",me=4,pe=10,ge=10,he="mce-resize-bar-dragging",be=new RegExp(/(\d+(\.\d+)?%)/),ve=new RegExp(/px|em/);return r.on("init",function(){r.dom.bind(u(),"mousedown",q)}),r.on("ObjectResized",function(t){var n=t.target;if("TABLE"===n.nodeName){var o=[];e.each(n.rows,function(t){e.each(t.cells,function(e){var t=r.dom.getStyle(e,"width",!0);o.push({cell:e,width:t})})}),e.each(o,function(e){r.dom.setStyle(e.cell,"width",e.width),r.dom.setAttrib(e.cell,"width",null)})}}),r.on("mouseover",function(e){if(!Z){var t=r.dom.getParent(e.target,"table");("TABLE"===e.target.nodeName||t)&&(o=t,b(t))}}),r.on("keydown",function(e){switch(e.keyCode){case n.LEFT:case n.RIGHT:case n.UP:case n.DOWN:h()}}),r.on("remove",function(){h(),r.dom.unbind(u(),"mousedown",q)}),{adjustWidth:F,adjustHeight:W,clearBars:h,drawBars:R,determineDeltas:I,getTableGrid:C,getTableDetails:x,getWidths:N,getPixelHeights:M,isPercentageBasedSize:U,isPixelBasedSize:H,recalculateWidths:z,recalculateCellHeights:L,recalculateRowHeights:O}}}),o("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(e,t,n,o,r,i,a,l,s){var c=i.each;s.add("table",function(i){function a(e){return function(){i.execCommand(e)}}function s(e,t){var n,o,r,a;for(r='<table id="__mce"><tbody>',n=0;n<t;n++){for(r+="<tr>",o=0;o<e;o++)r+="<td>"+(l.ie&&l.ie<10?"&nbsp;":"<br>")+"</td>";r+="</tr>"}return r+="</tbody></table>",i.undoManager.transact(function(){i.insertContent(r),a=i.dom.get("__mce"),i.dom.setAttrib(a,"id",null),i.$("tr",a).each(function(e,t){i.fire("newrow",{node:t}),i.$("th,td",t).each(function(e,t){i.fire("newcell",{node:t})})}),i.dom.setAttribs(a,i.settings.table_default_attributes||{}),i.dom.setStyles(a,i.settings.table_default_styles||{})}),a}function u(e,t,n){function o(){var o,r,a,l={},s=0;(o=(r=i.dom.select("td[data-mce-selected],th[data-mce-selected]"))[0])||(o=i.selection.getStart()),n&&r.length>0?(c(r,function(e){return l[e.parentNode.parentNode.nodeName]=1}),c(l,function(e){s+=e}),a=1!==s):a=!i.dom.getParent(o,t),e.disabled(a),i.selection.selectorChanged(t,function(t){e.disabled(!t)})}i.initialized?o():i.on("init",o)}function d(){u(this,"table")}function f(){u(this,"td,th")}function m(e,t,n){var o,r,a,l,s,c=n.getEl().getElementsByTagName("table")[0],u=n.isRtl()||"tl-tr"==n.parent().rel;for(c.nextSibling.innerHTML=e+1+" x "+(t+1),u&&(e=9-e),r=0;r<10;r++)for(o=0;o<10;o++)i.dom.toggleClass(l=c.rows[r].childNodes[o].firstChild,"mce-active",s=(u?o>=e:o<=e)&&r<=t),s&&(a=l);return a.parentNode}function p(e){return i.dom.is(e,"table")&&i.getBody().contains(e)}var g,h,b=this,v=new o(i);!i.settings.object_resizing||!1===i.settings.table_resize_bars||!0!==i.settings.object_resizing&&"table"!==i.settings.object_resizing||(h=r(i)),i.addMenuItem("inserttable",!1===i.settings.table_grid?{text:"Table",icon:"table",context:"table",onclick:v.table}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),v.table())},onshow:function(){m(0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");i.dom.removeClass(e,"mce-active"),i.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return(e+="</table>")+'<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n,o=e.target;"A"==o.tagName.toUpperCase()&&(t=parseInt(o.getAttribute("data-mce-x"),10),n=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),t===this.lastX&&n===this.lastY||(m(t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),i.undoManager.transact(function(){s(t.lastX+1,t.lastY+1)}),i.addVisual())}}]}),i.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:d,onclick:v.tableProps}),i.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:d,cmd:"mceTableDelete"}),i.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:a("mceTableCellProps"),onPostRender:f},{text:"Merge cells",onclick:a("mceTableMergeCells"),onPostRender:function(){u(this,"td,th",!0)}},{text:"Split cell",onclick:a("mceTableSplitCells"),onPostRender:f}]}),i.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:a("mceTableInsertRowBefore"),onPostRender:f},{text:"Insert row after",onclick:a("mceTableInsertRowAfter"),onPostRender:f},{text:"Delete row",onclick:a("mceTableDeleteRow"),onPostRender:f},{text:"Row properties",onclick:a("mceTableRowProps"),onPostRender:f},{text:"-"},{text:"Cut row",onclick:a("mceTableCutRow"),onPostRender:f},{text:"Copy row",onclick:a("mceTableCopyRow"),onPostRender:f},{text:"Paste row before",onclick:a("mceTablePasteRowBefore"),onPostRender:f},{text:"Paste row after",onclick:a("mceTablePasteRowAfter"),onPostRender:f}]}),i.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:a("mceTableInsertColBefore"),onPostRender:f},{text:"Insert column after",onclick:a("mceTableInsertColAfter"),onPostRender:f},{text:"Delete column",onclick:a("mceTableDeleteCol"),onPostRender:f}]});var y=[];c("inserttable tableprops deletetable | cell row column".split(" "),function(e){y.push("|"==e?{text:"-"}:i.menuItems[e])}),i.addButton("table",{type:"menubutton",title:"Table",menu:y}),l.isIE||i.on("click",function(e){"TABLE"===(e=e.target).nodeName&&(i.selection.select(e),i.nodeChanged())}),b.quirks=new t(i),i.on("Init",function(){b.cellSelection=new n(i,function(e){e&&h&&h.clearBars()}),b.resizeBars=h}),i.on("PreInit",function(){i.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})}),c({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t;t=i.dom.getParent(i.selection.getStart(),"th,td"),i.dom.select("td[data-mce-selected],th[data-mce-selected]").length?e.merge():v.merge(e,t)},mceTableInsertRowBefore:function(e){e.insertRows(!0)},mceTableInsertRowAfter:function(e){e.insertRows()},mceTableInsertColBefore:function(e){e.insertCols(!0)},mceTableInsertColAfter:function(e){e.insertCols()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){g=e.cutRows()},mceTableCopyRow:function(e){g=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(g,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(g)},mceSplitColsBefore:function(e){e.splitCols(!0)},mceSplitColsAfter:function(e){e.splitCols(!1)},mceTableDelete:function(e){h&&h.clearBars(),e.deleteTable()}},function(t,n){i.addCommand(n,function(){var n=new e(i);n&&(t(n),i.execCommand("mceRepaint"),b.cellSelection.clear())})}),c({mceInsertTable:v.table,mceTableProps:function(){v.table(!0)},mceTableRowProps:v.row,mceTableCellProps:v.cell},function(e,t){i.addCommand(t,function(t,n){e(n)})}),i.addButton("tableprops",{title:"Table properties",onclick:v.tableProps,icon:"table"}),i.addButton("tabledelete",{title:"Delete table",onclick:a("mceTableDelete")}),i.addButton("tablecellprops",{title:"Cell properties",onclick:a("mceTableCellProps")}),i.addButton("tablemergecells",{title:"Merge cells",onclick:a("mceTableMergeCells")}),i.addButton("tablesplitcells",{title:"Split cell",onclick:a("mceTableSplitCells")}),i.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:a("mceTableInsertRowBefore")}),i.addButton("tableinsertrowafter",{title:"Insert row after",onclick:a("mceTableInsertRowAfter")}),i.addButton("tabledeleterow",{title:"Delete row",onclick:a("mceTableDeleteRow")}),i.addButton("tablerowprops",{title:"Row properties",onclick:a("mceTableRowProps")}),i.addButton("tablecutrow",{title:"Cut row",onclick:a("mceTableCutRow")}),i.addButton("tablecopyrow",{title:"Copy row",onclick:a("mceTableCopyRow")}),i.addButton("tablepasterowbefore",{title:"Paste row before",onclick:a("mceTablePasteRowBefore")}),i.addButton("tablepasterowafter",{title:"Paste row after",onclick:a("mceTablePasteRowAfter")}),i.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:a("mceTableInsertColBefore")}),i.addButton("tableinsertcolafter",{title:"Insert column after",onclick:a("mceTableInsertColAfter")}),i.addButton("tabledeletecol",{title:"Delete column",onclick:a("mceTableDeleteCol")}),function(){var e=i.settings.table_toolbar;""!==e&&!1!==e&&(e||(e="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),i.addContextToolbar(p,e))}(),!1!==i.settings.table_tab_navigation&&i.on("keydown",function(t){var n,o,r;9==t.keyCode&&(n=i.dom.getParent(i.selection.getStart(),"th,td"))&&(t.preventDefault(),o=new e(i),r=t.shiftKey?-1:1,i.undoManager.transact(function(){!o.moveRelIdx(n,r)&&r>0&&(o.insertRow(),o.refresh(),o.moveRelIdx(n,r))}))}),b.insertTable=s,b.setClipboardRows=function(e){g=e},b.getClipboardRows=function(){return g}})})}(window);